<?php

$dir = __DIR__ . '/src';
$handle = fopen('scanner.php', 'w');
$files = scandir($dir);

fwrite($handle, "<?php namespace Ollyxar\AntiMalware;\n");
fwrite($handle, "\n/**\n * Warning!\n * This file generated automatically with [single_file_generator.php]\n */\n");

foreach ($files as $file) {
    if ($file != "." && $file != "..") {
        if (!is_dir($dir . "/" . $file)) {
            fwrite($handle, preg_replace('/^.+\n/', '', file_get_contents($dir . "/" . $file)));
        }
    }
}

fwrite($handle, "\n(new Scanner())->run();\n");

fclose($handle);